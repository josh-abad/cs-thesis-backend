(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c0ae5f4"],{"2f54":function(e,t,i){"use strict";i("6064")},"3a0e":function(e,t,i){"use strict";var n=i("7a23"),a=Object(n["P"])("data-v-820b8dc6");Object(n["v"])("data-v-820b8dc6");var r={class:"flex items-center"},c={key:0,class:"ml-2"},s={ref:"video",width:"100",height:"60",autoplay:"",muted:""},o={key:0,class:"webcam-timer-display"},d={class:"timer"},u=Object(n["j"])("h3",{class:"timer-header"},"Detection Timer",-1),l={class:"timer-remaining"},f={class:"timer-status"},m={class:"timer"},b=Object(n["j"])("h3",{class:"timer-header"},"Identification Timer",-1),h={class:"timer-remaining"},v={class:"timer-status"};Object(n["t"])();var p=a((function(e,t,i,a,p,j){var O,g,w,k,T,y,x,F,_=Object(n["A"])("EyeIcon");return Object(n["s"])(),Object(n["f"])("div",null,[Object(n["j"])("div",r,[Object(n["j"])(_,{on:e.cameraOn,detected:e.faceSeen,identified:e.faceIdentified},null,8,["on","detected","identified"]),e.debug?(Object(n["s"])(),Object(n["f"])("div",c,Object(n["F"])(e.faceIdentified?"Face Identified":e.faceSeen?"Face Detected":"No Face detected"),1)):Object(n["g"])("",!0)]),Object(n["N"])(Object(n["j"])("video",s,null,512),[[n["K"],e.cameraOn&&!e.hideVideo]]),e.debug?(Object(n["s"])(),Object(n["f"])("div",o,[Object(n["j"])("div",d,[u,Object(n["j"])("div",l," Remaining: "+Object(n["F"])(null!==(O=null===(g=e.detectionTimer)||void 0===g?void 0:g.remaining)&&void 0!==O?O:0)+" seconds ",1),Object(n["j"])("div",f," Status: "+Object(n["F"])(null!==(w=null===(k=e.detectionTimer)||void 0===k?void 0:k.status)&&void 0!==w?w:"stopped"),1)]),Object(n["j"])("div",m,[b,Object(n["j"])("div",h," Remaining: "+Object(n["F"])(null!==(T=null===(y=e.identificationTimer)||void 0===y?void 0:y.remaining)&&void 0!==T?T:0)+" seconds ",1),Object(n["j"])("div",v," Status: "+Object(n["F"])(null!==(x=null===(F=e.identificationTimer)||void 0===F?void 0:F.status)&&void 0!==x?x:"stopped"),1)])])):Object(n["g"])("",!0)])})),j=(i("4160"),i("caad"),i("d81d"),i("a9e3"),i("d3b7"),i("25f0"),i("2532"),i("3ca3"),i("159b"),i("ddb0"),i("96cf"),i("1da1")),O=i("ab39"),g=i("8141"),w=i("219d"),k=Object(n["P"])("data-v-1985fbe8");Object(n["v"])("data-v-1985fbe8");var T={class:"icon"},y=Object(n["j"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),x=Object(n["j"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1),F={key:1,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_=Object(n["j"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1);Object(n["t"])();var I=k((function(e,t,i,a,r,c){return Object(n["s"])(),Object(n["f"])("div",T,[e.on?(Object(n["s"])(),Object(n["f"])("svg",{key:0,class:{"icon-detected":e.detected,"icon-identified":e.identified},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y,x],2)):(Object(n["s"])(),Object(n["f"])("svg",F,[_]))])})),S=Object(n["k"])({name:"EyeIcon",props:{on:{type:Boolean,default:!1},detected:{type:Boolean,default:!1},identified:{type:Boolean,default:!1}}});i("5e30");S.render=I,S.__scopeId="data-v-1985fbe8";var B=S;function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t,i){return t&&M(e.prototype,t),i&&M(e,i),e}var N=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];V(this,e),this._remaining=i,this.callback=t,this.duration=i,this._start=n?Date.now():0,this.timerId=n?window.setTimeout(this.callback,i):null,this._status=n?"active":"stopped"}return D(e,[{key:"start",value:function(){this.timerId&&clearTimeout(this.timerId),this._start=Date.now(),this.timerId=window.setTimeout(this.callback,this.duration),this._status="active"}},{key:"stop",value:function(){"active"===this._status&&(this.timerId&&clearTimeout(this.timerId),this._remaining=0,this._status="stopped")}},{key:"pause",value:function(){"active"===this._status&&(this.timerId&&clearTimeout(this.timerId),this._remaining=this.duration-(Date.now()-this._start),this._status="paused")}},{key:"resume",value:function(){"paused"===this._status&&(this.timerId&&clearTimeout(this.timerId),this._start=Date.now(),this.timerId=window.setTimeout(this.callback,this._remaining),this._status="active")}},{key:"remaining",get:function(){return"paused"===this._status?Math.floor(this._remaining/1e3):"active"===this._status?Math.floor((this.duration-(Date.now()-this._start))/1e3):0}},{key:"status",get:function(){return this._status}}]),e}(),R=!0,U="/models",z=Object(n["k"])({name:"Webcam",components:{EyeIcon:B},mixins:[w["a"]],props:{hideVideo:{type:Boolean,default:!1},detectionDuration:{type:Number,default:5},debug:{type:Boolean,default:!1}},emits:["no-face-seen","unidentified-face"],data:function(){return{faceSeen:!1,multipleFacesSeen:0,usersSeen:[],video:{},cameraOn:!1,detectionTimer:null,identificationTimer:null}},computed:{userName:function(){var e;return(null===(e=this.user)||void 0===e?void 0:e.fullName)||""},faceIdentified:function(){return 1===this.usersSeen.length&&this.usersSeen[0].includes(this.userName)},duration:function(){return 1e3*this.detectionDuration}},watch:{faceSeen:function(e){var t;this.detectionTimer&&(e?(this.detectionTimer.stop(),"paused"===(null===(t=this.identificationTimer)||void 0===t?void 0:t.status)&&this.identificationTimer&&this.identificationTimer.resume()):["stopped","paused"].includes(this.detectionTimer.status)&&(this.detectionTimer.start(),this.identificationTimer&&this.identificationTimer.pause()))},faceIdentified:function(e){var t;this.identificationTimer&&(e?this.identificationTimer.stop():["stopped","paused"].includes(this.identificationTimer.status)&&"stopped"===(null===(t=this.detectionTimer)||void 0===t?void 0:t.status)&&this.identificationTimer.start())}},mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.detectionTimer=new N(e.detectionTimeout,e.duration),e.identificationTimer=new N(e.identificationTimeout,e.duration),e.video=e.$refs.video,t.next=5,e.loadModels();case 5:return t.next=7,e.createFaceMatcher();case 7:if(i=t.sent,i){t.next=10;break}return t.abrupt("return");case 10:return e.video.addEventListener("play",e.startDetection(i)),t.next=13,e.startVideo();case 13:e.detectionTimer.start();case 14:case"end":return t.stop()}}),t)})))()},unmounted:function(){this.stopVideo(),this.detectionTimer&&this.detectionTimer.stop(),this.identificationTimer&&this.identificationTimer.stop()},methods:{detectionTimeout:function(){this.$emit("no-face-seen"),this.detectionTimer&&this.detectionTimer.start()},identificationTimeout:function(){this.$emit("unidentified-face"),this.identificationTimer&&this.identificationTimer.start()},loadModels:function(){return Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([O["i"](U),O["g"](U),O["h"](U)]);case 2:case"end":return e.stop()}}),e)})))()},startDetection:function(e){var t=this;return function(){setInterval(Object(j["a"])(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,O["d"](t.video,new O["c"]({inputSize:128})).withFaceLandmarks(R).withFaceDescriptors();case 2:n=i.sent,a=n.map((function(t){return e.findBestMatch(t.descriptor)})),t.faceSeen=!!n.length,t.usersSeen=a.map((function(e){return e.toString()})),t.multipleFacesSeen=n.length;case 7:case"end":return i.stop()}}),i)}))),300)}},startVideo:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({video:{}});case 3:i=t.sent,e.video.srcObject=i,e.video.play(),e.cameraOn=!0,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$store.dispatch(g["a"],t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},stopVideo:function(){var e,t=null===(e=this.video)||void 0===e?void 0:e.srcObject;t&&(t.getTracks().forEach((function(e){return e.stop()})),this.cameraOn=!1)},createFaceMatcher:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var i,n,a,r,c,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=null===(i=e.user)||void 0===i?void 0:i.referenceImageUrl,n){t.next=3;break}return t.abrupt("return",null);case 3:return t.prev=3,t.next=6,O["f"](encodeURI(n));case 6:return a=t.sent,t.next=9,O["e"](a,new O["c"]).withFaceLandmarks(R).withFaceDescriptor();case 9:if(r=t.sent,r){t.next=12;break}throw new Error("No face detected for ".concat(e.userName,"."));case 12:return c=[r.descriptor],s=new O["b"](e.userName||"unknown",c),o=.6,t.abrupt("return",new O["a"](s,o));case 18:return t.prev=18,t.t0=t["catch"](3),t.abrupt("return",null);case 21:case"end":return t.stop()}}),t,null,[[3,18]])})))()}}});i("2f54");z.render=p,z.__scopeId="data-v-820b8dc6";t["a"]=z},"5e30":function(e,t,i){"use strict";i("68c5")},6064:function(e,t,i){},"68c5":function(e,t,i){},b338:function(e,t,i){"use strict";i.r(t);var n=i("7a23"),a={class:"p-4"},r={class:"mr-8 bg-dark-12 px-4 py-2 fixed bottom-0 right-0 z-20 rounded-t-lg shadow-lg flex space-x-2"},c={class:"text-red-400 inline-flex items-center"},s=Object(n["j"])("svg",{class:"w-10 h-10",viewBox:"0 0 20 20",fill:"currentColor"},[Object(n["j"])("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),o={class:"flex flex-col items-start"},d=Object(n["i"])("Reset Warnings");function u(e,t,i,u,l,f){var m=Object(n["A"])("Webcam"),b=Object(n["A"])("BaseButton"),h=Object(n["A"])("ToggleButton"),v=Object(n["A"])("BasePanel");return Object(n["s"])(),Object(n["f"])("div",a,[(Object(n["s"])(),Object(n["f"])(n["b"],{to:"#modals"},[Object(n["j"])("div",r,[Object(n["j"])(m,{onNoFaceSeen:e.handleNoFaceSeen,onUnidentifiedFace:e.handleUnidentifiedFace,"detection-duration":10,debug:e.debug,"hide-video":!e.video},null,8,["onNoFaceSeen","onUnidentifiedFace","debug","hide-video"]),Object(n["j"])("div",c,[s,Object(n["i"])(" "+Object(n["F"])(e.warnings),1)])])])),Object(n["j"])(v,null,{default:Object(n["M"])((function(){return[Object(n["j"])("div",o,[Object(n["j"])(b,{onClick:t[1]||(t[1]=function(t){return e.warnings=0})},{default:Object(n["M"])((function(){return[d]})),_:1}),Object(n["j"])(h,{modelValue:e.debug,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.debug=t}),label:"Debug"},null,8,["modelValue"]),Object(n["j"])(h,{modelValue:e.video,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.video=t}),label:"Show Video"},null,8,["modelValue"])]),(Object(n["s"])(),Object(n["f"])(n["a"],null,Object(n["y"])(25,(function(e){return Object(n["j"])("div",{key:e},"foo")})),64))]})),_:1})])}var l=i("82ea"),f=i("19bf"),m={class:"relative"},b={class:"ml-3 text-sm"};function h(e,t,i,a,r,c){return Object(n["s"])(),Object(n["f"])("label",{for:e.label,class:["mt-3 inline-flex items-center",e.disabled?"opacity-50 cursor-default":"opacity-100 cursor-pointer"]},[Object(n["j"])("span",m,[Object(n["j"])("span",{class:["block w-10 h-6 rounded-full shadow-inner",e.modelValue?"bg-green-500":"bg-gray-600"]},null,2),Object(n["j"])("span",{class:["absolute block w-4 h-4 mt-1 ml-1 bg-white rounded-full shadow-lg inset-y-0 left-0 focus-within:shadow-outline transition-transform duration-300 ease-in-out",e.modelValue?"transform translate-x-full":""]},[Object(n["j"])("input",{value:e.modelValue,onChange:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.checked)}),id:e.label,disabled:e.disabled,type:"checkbox",class:"absolute opacity-0 w-0 h-0"},null,40,["value","id","disabled"])],2)]),Object(n["j"])("span",b,Object(n["F"])(e.label),1)],10,["for"])}var v=Object(n["k"])({name:"ToggleButton",props:{modelValue:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue"]});v.render=h;var p=v,j=i("3a0e"),O=i("8141"),g=Object(n["k"])({name:"WebcamTest",components:{BaseButton:l["a"],Webcam:j["a"],BasePanel:f["a"],ToggleButton:p},data:function(){return{warnings:0,debug:!1,video:!1}},methods:{handleNoFaceSeen:function(){this.warnings++,this.$store.dispatch(O["a"],"No face seen for 10 seconds.")},handleUnidentifiedFace:function(){this.warnings++,this.$store.dispatch(O["a"],"Face unidentified for 10 seconds")}}});g.render=u;t["default"]=g}}]);
//# sourceMappingURL=chunk-8c0ae5f4.e9760950.js.map