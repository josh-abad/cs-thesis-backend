{"version":3,"sources":["webpack:///./src/views/FaceIdentificationPage/FaceIdentificationPage.vue","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/ImageUpload.vue","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/components/Feedback.vue","webpack:///./src/components/LoadingWheel.vue","webpack:///./src/components/LoadingWheel.vue?0486","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/components/Feedback.vue?a948","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/components/Feedback.vue?45d2","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/components/Preview.vue","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/components/Preview.vue?d3ce","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/ImageUpload.vue?e72a","webpack:///./src/views/FaceIdentificationPage/components/ImageUpload/ImageUpload.vue?8002","webpack:///./src/views/FaceIdentificationPage/FaceIdentificationPage.vue?a3fd","webpack:///./src/views/FaceIdentificationPage/FaceIdentificationPage.vue?3c63","webpack:///./src/components/BaseLabel.vue","webpack:///./src/components/BaseLabel.vue?47fe","webpack:///./src/components/BaseLabel.vue?8e54"],"names":["class","method","enctype","viewBox","fill","fill-rule","d","clip-rule","previewImage","emphasis","src","validImage","user","referenceImageUrl","image","valid","loading","type","name","accept","handleChange","handleSubmit","disabled","prominent","cx","cy","r","stroke","stroke-width","script","render","components","LoadingWheel","props","Boolean","required","alt","MODELS_URL","BaseButton","Feedback","Preview","BaseLabel","mixins","data","mounted","console","log","methods","token","id","FormData","append","start","users","uploadImage","updatedUser","done","$store","commit","event","target","files","reader","FileReader","readAsDataURL","addEventListener","e","result","input","options","detection","ImageUpload","BasePanel","userId","String","default"],"mappings":"0IACOA,MAAM,O,EAEP,eAAwD,OAAnDA,MAAM,qBAAoB,uBAAmB,G,EAClD,eAGM,OAHDA,MAAM,yBAAwB,sGAGnC,G,kHANJ,eASM,MATN,EASM,CARJ,eAOY,Q,wBANV,iBAAwD,CAAxD,EACA,EAIA,eAA4B,GAAfA,MAAM,a,eCNhBA,MAAM,Q,SACgBA,MAAM,Q,iBACT,O,iBAOA,W,YAMlB,eAMM,OANDA,MAAM,mCAAiC,CAC1C,eAIM,OAHJA,MAAM,gGACP,gB,MAaHC,OAAO,OAAOC,QAAQ,sBAAsBF,MAAM,Q,GACjDA,MAAM,kC,GAEPA,MAAM,gK,EAGN,eAUM,OATJA,MAAM,uBACNG,QAAQ,YACRC,KAAK,gB,CAEL,eAIE,QAHAC,YAAU,UACVC,EAAE,6FACFC,YAAU,c,KAGd,eAAyC,QAAnCP,MAAM,WAAU,gBAAY,G,iBAejC,W,8KAhET,eAoEM,YAnEJ,eAwBM,MAxBN,EAwBM,CAvBO,EAAAQ,c,iBAAX,eAGM,MAHN,EAGM,CAFJ,eAAmC,GAAxBC,SAAA,IAAQ,C,wBAAC,iBAAG,C,YACvB,eAA+B,GAArBC,IAAK,EAAAF,cAAY,mB,sBAE7B,eAkBM,OAjBJR,MAAK,CAAC,qCAAoC,uBACT,EAAAW,c,CAEjC,eAAuC,GAA5BF,SAAA,IAAQ,C,wBAAC,iBAAO,C,sBAEnB,EAAAG,Y,OAAA,EAAMC,mB,iBADd,eAGE,G,MADCH,IAAG,UAAE,EAAAE,YAAF,aAAE,EAAMC,mB,mCAEd,eAQM,SAPJ,M,KAUN,eAKE,GAJAb,MAAK,CAAC,OAAM,cACY,EAAAc,QACvBC,MAAO,EAAAJ,WACPK,QAAS,EAAAA,S,oCAEZ,eAmCO,OAnCP,EAmCO,CAlCL,eAiCM,MAjCN,EAiCM,CAhCJ,eAuBQ,QAvBR,EAuBQ,CAnBN,EAWA,EACA,eAME,SALAC,KAAK,OACLC,KAAK,QACLC,OAAO,kBACPnB,MAAM,SACL,SAAM,8BAAE,EAAAoB,cAAA,EAAAA,aAAA,sB,WAGb,eAOC,GANCpB,MAAM,OACL,QAAK,eAAU,EAAAqB,aAAY,aAC3BC,WAAY,EAAAR,OAAS,EAAAH,YACtBM,KAAK,SACLM,UAAA,I,yBACC,iBAAO,C,4JC9DPvB,MAAM,oC,iBACoB,oB,GAS1BA,MAAM,uBAAuBG,QAAQ,YAAYC,KAAK,gB,SAIvDC,YAAU,UACVC,EAAE,qHACFC,YAAU,W,SAKVF,YAAU,UACVC,EAAE,qMACFC,YAAU,W,GAGTP,MAAM,gB,yGA5Bf,eAiCM,YAhCO,EAAAgB,S,iBAAX,eAKM,SAJJ,eAGM,MAHN,EAGM,CAFJ,eAA6B,GAAfhB,MAAM,S,yBAIxB,eAyBM,O,MAvBJA,MAAK,CAAC,2BACE,EAAAe,MAAK,kC,mBAEb,eAeM,MAfN,EAeM,CAZI,EAAAA,O,iBADR,eAKE,OALF,K,iBAOA,eAKE,OALF,OAOF,eAGM,MAHN,EAGM,CAFO,EAAAA,O,iBAAX,eAAqC,QAAnB,mB,iBAClB,eAA2C,QAA/B,iC,aC9Bbf,MAAM,uBAAuBI,KAAK,OAAOD,QAAQ,a,EACpD,eAOE,UANAH,MAAM,aACNwB,GAAG,KACHC,GAAG,KACHC,EAAE,KACFC,OAAO,eACPC,eAAa,K,WAEf,eAIE,QAHA5B,MAAM,aACNI,KAAK,eACLE,EAAE,mH,iDAZN,eAcM,MAdN,EAcM,CAbJ,EAQA,ICTJ,MAAMuB,EAAS,GACfA,EAAOC,OAAS,EAED,QCAA,iBAAgB,CAC7BZ,KAAM,WACNa,WAAY,CAAEC,gBACdC,MAAO,CACLlB,MAAO,CACLE,KAAMiB,QACNC,UAAU,GAGZnB,QAAS,CACPC,KAAMiB,QACNC,UAAU,MCZhB,EAAOL,OAAS,EAED,Q,GCHXM,IAAI,gBACJpC,MAAM,4D,wCAFR,eAGE,MAHF,GCAF,MAAM,EAAS,GACf,EAAO8B,OAAS,EAED,Q,iCCSTO,EAAa,UAEJ,kBAAgB,CAC7BnB,KAAM,cACNa,WAAY,CAAEO,aAAA,KAAYC,WAAUC,UAASC,YAAA,MAC7CC,OAAQ,CAAC9B,EAAA,MACT+B,KAJ6B,WAK3B,MAAO,CACL7B,MAAO,KACPN,aAAc,KACdG,YAAY,EACZK,SAAS,IAGP4B,QAZuB,WAYhB,sKAEH,OAAkCP,GAF/B,yDAITQ,QAAQC,IAAR,MAJS,2DAObC,QAAS,CACD1B,aADC,WACW,yKACX,EAAKT,KADM,sDAEM,EAAKA,KAAnBoC,EAFQ,EAERA,MAAOC,EAFC,EAEDA,GAEV,EAAKnC,MAJM,wDAKV6B,EAAO,IAAIO,SACjBP,EAAKQ,OAAO,QAAS,EAAKrC,OAE1B,IAAUsC,QARM,UASUC,EAAA,KAAaC,YAAYL,EAAIN,GATvC,QASVY,EATU,OAUhB,IAAUC,OACV,EAAKC,OAAOC,OAAO,OAAnB,gBAA+BV,SAAUO,IACzC,EAAK/C,aAAe,KACpB,EAAKM,MAAQ,KACb,EAAKH,YAAa,EAdF,+CAgBZS,aAjBC,SAiBauC,GAAY,gKAC9B,EAAK3C,SAAU,EACf,EAAKF,OAAS,UAAA6C,EAAMC,OAA4BC,aAAlC,eAA0C,KAAM,KAC1D,EAAK/C,QACDgD,EAAS,IAAIC,WACnBD,EAAOE,cAAc,EAAKlD,OAC1BgD,EAAOG,iBAAiB,OAAxB,yDAAgC,WAAOC,GAAP,oGAC9B,EAAK1D,aAAL,UAAoB0D,EAAEN,cAAtB,aAAoB,EAAUO,OADA,SAGV,OAAmB,EAAK3D,cAHd,cAGxB4D,EAHwB,OAIxBC,EAAU,IAAI,OAJU,kBAMJ,OAAyBD,EAAOC,GAN5B,OAMtBC,EANsB,OAO5B,EAAKtD,SAAU,EACf,EAAKL,aAAe2D,EARQ,qDAU5BzB,QAAQC,IAAR,MAV4B,0DAAhC,wDAN4B,iDChDpC,GAAOhB,OAAS,EAED,U,aCAA,kBAAgB,CAC7BZ,KAAM,yBACNa,WAAY,CAAEwC,eAAaC,aAAA,MAC3BvC,MAAO,CACLwC,OAAQ,CACNxD,KAAMyD,OACNvC,UAAU,MCRhB,GAAOL,OAASA,EAED,iB,oGCJb,eAKM,OAJJ9B,MAAK,CAAC,2CACE,EAAAS,SAAQ,0C,CAEhB,eAAa,qB,GCFF,qBAAgB,CAC7BS,KAAM,YACNe,MAAO,CACLxB,SAAU,CACRQ,KAAMiB,QACNyC,SAAS,MCLf,EAAO7C,OAASA,EAED","file":"js/chunk-6acf916c.c0f30c1e.js","sourcesContent":["<template>\n  <div class=\"p-4\">\n    <BasePanel>\n      <div class=\"font-bold text-xl\">Face Identification</div>\n      <div class=\"text-gray-400 text-sm\">\n        Please upload a picture of your face. This image will only be used to\n        identify you during exams.\n      </div>\n      <ImageUpload class=\"mt-4\" />\n    </BasePanel>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport ImageUpload from './components/ImageUpload/ImageUpload.vue'\nimport BasePanel from '@/components/BasePanel.vue'\n\nexport default defineComponent({\n  name: 'FaceIdentificationPage',\n  components: { ImageUpload, BasePanel },\n  props: {\n    userId: {\n      type: String,\n      required: true\n    }\n  }\n})\n</script>\n","<template>\n  <div>\n    <div class=\"flex\">\n      <div v-if=\"previewImage\" class=\"mr-4\">\n        <BaseLabel emphasis>New</BaseLabel>\n        <Preview :src=\"previewImage\" />\n      </div>\n      <div\n        class=\"ease-in-out duration-300 transform\"\n        :class=\"{ 'opacity-50 scale-95': validImage }\"\n      >\n        <BaseLabel emphasis>Current</BaseLabel>\n        <Preview\n          v-if=\"user?.referenceImageUrl\"\n          :src=\"user?.referenceImageUrl\"\n        />\n        <div v-else>\n          <div class=\"w-56 h-56 bg-dark-06 rounded-lg\">\n            <div\n              class=\"flex items-center justify-center h-full text-gray-500 font-semibold uppercase tracking-wider\"\n            >\n              No image\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <Feedback\n      class=\"mt-2\"\n      :class=\"{ 'opacity-0': !image }\"\n      :valid=\"validImage\"\n      :loading=\"loading\"\n    />\n    <form method=\"post\" enctype=\"multipart/form-data\" class=\"mt-2\">\n      <div class=\"flex justify-between items-end\">\n        <label\n          class=\"cursor-pointer border border-green-500 text-green-500 hover:text-white hover:bg-green-500 flex flex-col px-4 py-2 items-center rounded-lg focus:outline-none\"\n        >\n          <!-- Heroicon name: photograph -->\n          <svg\n            class=\"fill-current w-5 h-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n          <span class=\"text-sm\">Select Image</span>\n          <input\n            type=\"file\"\n            name=\"image\"\n            accept=\".jpg,.jpeg,.png\"\n            class=\"hidden\"\n            @change=\"handleChange\"\n          />\n        </label>\n        <BaseButton\n          class=\"mt-2\"\n          @click.prevent=\"handleSubmit\"\n          :disabled=\"!(image && validImage)\"\n          type=\"submit\"\n          prominent\n          >Confirm</BaseButton\n        >\n      </div>\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport usersService from '@/services/users'\nimport { SET_USER } from '@/store/mutation-types'\nimport { defineComponent } from 'vue'\nimport userMixin from '@/mixins/user'\nimport BaseButton from '@/components/BaseButton.vue'\nimport * as faceapi from 'face-api.js'\nimport { TinyFaceDetectorOptions } from 'face-api.js'\nimport Feedback from './components/Feedback.vue'\nimport Preview from './components/Preview.vue'\nimport BaseLabel from '@/components/BaseLabel.vue'\nimport nProgress from 'nprogress'\n\nconst MODELS_URL = '/models'\n\nexport default defineComponent({\n  name: 'ImageUpload',\n  components: { BaseButton, Feedback, Preview, BaseLabel },\n  mixins: [userMixin],\n  data () {\n    return {\n      image: null as File | null,\n      previewImage: null as string | null,\n      validImage: false,\n      loading: false\n    }\n  },\n  async mounted (): Promise<void> {\n    try {\n      await faceapi.loadTinyFaceDetectorModel(MODELS_URL)\n    } catch (error) {\n      console.log(error)\n    }\n  },\n  methods: {\n    async handleSubmit (): Promise<void> {\n      if (!this.user) return\n      const { token, id } = this.user\n\n      if (!this.image) return\n      const data = new FormData()\n      data.append('image', this.image)\n\n      nProgress.start()\n      const updatedUser = await usersService.uploadImage(id, data)\n      nProgress.done()\n      this.$store.commit(SET_USER, { token, ...updatedUser })\n      this.previewImage = null\n      this.image = null\n      this.validImage = false\n    },\n    async handleChange (event: Event): Promise<void> {\n      this.loading = true\n      this.image = (event.target as HTMLInputElement).files?.[0] || null\n      if (this.image) {\n        const reader = new FileReader()\n        reader.readAsDataURL(this.image)\n        reader.addEventListener('load', async (e) => {\n          this.previewImage = e.target?.result as string\n\n          const input = await faceapi.fetchImage(this.previewImage)\n          const options = new TinyFaceDetectorOptions()\n          try {\n            const detection = await faceapi.detectSingleFace(input, options)\n            this.loading = false\n            this.validImage = !!detection\n          } catch (error) {\n            console.log(error)\n          }\n        })\n      }\n    }\n  }\n})\n</script>\n","<template>\n  <div>\n    <div v-if=\"loading\">\n      <div class=\"inline-flex items-center text-sm\">\n        <LoadingWheel class=\"mr-1\" />\n        Detecting face\n      </div>\n    </div>\n    <div\n      v-else\n      class=\"inline-flex items-center\"\n      :class=\"valid ? 'text-green-300' : 'text-red-300'\"\n    >\n      <svg class=\"fill-current w-4 h-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n        <!-- Heroicon name: check -->\n        <path\n          v-if=\"valid\"\n          fill-rule=\"evenodd\"\n          d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n          clip-rule=\"evenodd\"\n        />\n        <!-- Heroicon name: x -->\n        <path\n          v-else\n          fill-rule=\"evenodd\"\n          d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n          clip-rule=\"evenodd\"\n        />\n      </svg>\n      <div class=\"text-sm ml-1\">\n        <div v-if=\"valid\">Face detected</div>\n        <div v-else>No face detected in image</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport LoadingWheel from '@/components/LoadingWheel.vue'\n\nexport default defineComponent({\n  name: 'Feedback',\n  components: { LoadingWheel },\n  props: {\n    valid: {\n      type: Boolean,\n      required: true\n    },\n\n    loading: {\n      type: Boolean,\n      required: true\n    }\n  }\n})\n</script>\n","<template>\n  <svg class=\"animate-spin w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n    <circle\n      class=\"opacity-25\"\n      cx=\"12\"\n      cy=\"12\"\n      r=\"10\"\n      stroke=\"currentColor\"\n      stroke-width=\"4\"\n    />\n    <path\n      class=\"opacity-75\"\n      fill=\"currentColor\"\n      d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n    />\n  </svg>\n</template>\n","import { render } from \"./LoadingWheel.vue?vue&type=template&id=9294653a\"\nconst script = {}\nscript.render = render\n\nexport default script","\nimport { defineComponent } from 'vue'\nimport LoadingWheel from '@/components/LoadingWheel.vue'\n\nexport default defineComponent({\n  name: 'Feedback',\n  components: { LoadingWheel },\n  props: {\n    valid: {\n      type: Boolean,\n      required: true\n    },\n\n    loading: {\n      type: Boolean,\n      required: true\n    }\n  }\n})\n","import { render } from \"./Feedback.vue?vue&type=template&id=7c479d64\"\nimport script from \"./Feedback.vue?vue&type=script&lang=ts\"\nexport * from \"./Feedback.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <img\n    alt=\"Preview Image\"\n    class=\"rounded-lg shadow w-56 h-56 overflow-hidden object-cover\"\n  />\n</template>\n","import { render } from \"./Preview.vue?vue&type=template&id=672197d2\"\nconst script = {}\nscript.render = render\n\nexport default script","\nimport usersService from '@/services/users'\nimport { SET_USER } from '@/store/mutation-types'\nimport { defineComponent } from 'vue'\nimport userMixin from '@/mixins/user'\nimport BaseButton from '@/components/BaseButton.vue'\nimport * as faceapi from 'face-api.js'\nimport { TinyFaceDetectorOptions } from 'face-api.js'\nimport Feedback from './components/Feedback.vue'\nimport Preview from './components/Preview.vue'\nimport BaseLabel from '@/components/BaseLabel.vue'\nimport nProgress from 'nprogress'\n\nconst MODELS_URL = '/models'\n\nexport default defineComponent({\n  name: 'ImageUpload',\n  components: { BaseButton, Feedback, Preview, BaseLabel },\n  mixins: [userMixin],\n  data () {\n    return {\n      image: null as File | null,\n      previewImage: null as string | null,\n      validImage: false,\n      loading: false\n    }\n  },\n  async mounted (): Promise<void> {\n    try {\n      await faceapi.loadTinyFaceDetectorModel(MODELS_URL)\n    } catch (error) {\n      console.log(error)\n    }\n  },\n  methods: {\n    async handleSubmit (): Promise<void> {\n      if (!this.user) return\n      const { token, id } = this.user\n\n      if (!this.image) return\n      const data = new FormData()\n      data.append('image', this.image)\n\n      nProgress.start()\n      const updatedUser = await usersService.uploadImage(id, data)\n      nProgress.done()\n      this.$store.commit(SET_USER, { token, ...updatedUser })\n      this.previewImage = null\n      this.image = null\n      this.validImage = false\n    },\n    async handleChange (event: Event): Promise<void> {\n      this.loading = true\n      this.image = (event.target as HTMLInputElement).files?.[0] || null\n      if (this.image) {\n        const reader = new FileReader()\n        reader.readAsDataURL(this.image)\n        reader.addEventListener('load', async (e) => {\n          this.previewImage = e.target?.result as string\n\n          const input = await faceapi.fetchImage(this.previewImage)\n          const options = new TinyFaceDetectorOptions()\n          try {\n            const detection = await faceapi.detectSingleFace(input, options)\n            this.loading = false\n            this.validImage = !!detection\n          } catch (error) {\n            console.log(error)\n          }\n        })\n      }\n    }\n  }\n})\n","import { render } from \"./ImageUpload.vue?vue&type=template&id=277a2004\"\nimport script from \"./ImageUpload.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageUpload.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent } from 'vue'\nimport ImageUpload from './components/ImageUpload/ImageUpload.vue'\nimport BasePanel from '@/components/BasePanel.vue'\n\nexport default defineComponent({\n  name: 'FaceIdentificationPage',\n  components: { ImageUpload, BasePanel },\n  props: {\n    userId: {\n      type: String,\n      required: true\n    }\n  }\n})\n","import { render } from \"./FaceIdentificationPage.vue?vue&type=template&id=22a83428\"\nimport script from \"./FaceIdentificationPage.vue?vue&type=script&lang=ts\"\nexport * from \"./FaceIdentificationPage.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div\n    class=\"text-xs text-gray-400 font-semibold mb-1\"\n    :class=\"emphasis ? 'uppercase tracking-wider' : 'capitalize'\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'BaseLabel',\n  props: {\n    emphasis: {\n      type: Boolean,\n      default: false\n    }\n  }\n})\n</script>\n","\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'BaseLabel',\n  props: {\n    emphasis: {\n      type: Boolean,\n      default: false\n    }\n  }\n})\n","import { render } from \"./BaseLabel.vue?vue&type=template&id=4b04bf51\"\nimport script from \"./BaseLabel.vue?vue&type=script&lang=ts\"\nexport * from \"./BaseLabel.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}